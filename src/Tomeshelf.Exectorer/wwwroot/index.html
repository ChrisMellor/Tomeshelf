<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>Tomeshelf Executor</title>
    <link rel="stylesheet" href="styles.css"/>
</head>
<body>
<header>
    <h1>Tomeshelf Executor</h1>
    <p>Manually execute service endpoints with optional overrides and monitor upcoming scheduled runs when Swagger is unavailable.</p>
</header>
<main>
    <section class="pane">
        <h2>Endpoints</h2>
        <div class="field">
            <label for="endpointSelect">Select Endpoint</label>
            <select id="endpointSelect"></select>
        </div>
        <div id="messageArea" class="message"></div>
        <div class="endpoint-meta">
            <div class="endpoint-card">
                <span>Method</span>
                <strong class="method-badge" id="endpointMethodDisplay">--</strong>
            </div>
            <div class="endpoint-card">
                <span>Target</span>
                <strong id="endpointTarget">--</strong>
            </div>
            <div class="endpoint-card">
                <span>Content Type</span>
                <strong id="bodyContentType">application/json</strong>
            </div>
            <div class="endpoint-card">
                <span>Timeout</span>
                <strong id="timeoutMeta">HttpClient default</strong>
            </div>
            <div class="endpoint-card">
                <span>Schedule</span>
                <strong id="scheduleMeta">--</strong>
            </div>
            <div class="endpoint-card">
                <span>Origin</span>
                <strong id="originMeta">configuration</strong>
            </div>
        </div>
        <div class="description" id="endpointDescription">
            Select an endpoint to view details.
        </div>
        <div class="schedule-list" id="scheduleList"></div>
    </section>
    <section class="pane">
        <h2>Manual Execution</h2>
        <form id="executeForm" autocomplete="off">
            <div class="field">
                <label for="methodInput">HTTP Method</label>
                <input id="methodInput" name="methodInput" placeholder="GET"/>
            </div>
            <div class="field">
                <label for="urlInput">Override URL (optional)</label>
                <input id="urlInput" name="urlInput" placeholder="https://service/path"/>
                <small>Leave blank to use the configured endpoint URL.</small>
            </div>
            <div class="field">
                <label for="headersInput">Additional Headers</label>
                <textarea id="headersInput" name="headersInput" placeholder="Header-Name: value"></textarea>
                <small>One header per line. Existing configured headers remain in place.</small>
            </div>
            <div class="field">
                <label for="queryInput">Query Parameters</label>
                <textarea id="queryInput" name="queryInput" placeholder="key=value"></textarea>
                <small>One key/value pair per line.</small>
            </div>
            <div class="field">
                <label for="bodyInput">Request Body</label>
                <textarea id="bodyInput" name="bodyInput" placeholder='{"example":"value"}'></textarea>
                <small id="bodyHelp">Provide JSON payload when required.</small>
            </div>
            <div class="field">
                <label for="timeoutInput">Timeout (seconds)</label>
                <input id="timeoutInput" name="timeoutInput" type="number" min="1" placeholder="Optional"/>
            </div>
            <button type="submit">Execute endpoint</button>
        </form>
        <div id="executionResult" class="result hidden">
            <div id="resultStatus" class="status-pill">Status</div>
            <div id="resultMessage"></div>
            <div id="resultMeta"></div>
            <div>
                <span class="badge">Response body</span>
                <pre id="resultBody"></pre>
            </div>
            <div>
                <span class="badge">Response headers</span>
                <div id="resultHeaders"></div>
            </div>
        </div>
    </section>
</main>
<script src="app.js" defer></script>
</body>
</html>